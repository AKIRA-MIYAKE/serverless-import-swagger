"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _lodash = _interopRequireDefault(require("lodash"));

var _utils = require("../utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = async (cliOptions, appRootPath = undefined) => {
  const confFilePath = typeof cliOptions.config !== 'undefined' ? (0, _utils.resolveAppRootPath)(cliOptions.config, appRootPath) : (0, _utils.resolveAppRootPath)('./sis.config.json', appRootPath);
  const existsConfFile = await (0, _utils.existsItem)(confFilePath);
  const confFileConfig = existsConfFile ? await (0, _utils.loadFileAsJSONIfExists)(confFilePath) : {};
  const defaultConfig = {
    all: true,
    serviceName: 'service',
    basePath: false,
    input: null,
    outDir: null,
    common: null,
    force: false,
    options: {
      cors: false,
      optionsMethod: false,
      authorizer: null,
      operationId: false
    }
  };
  return _lodash.default.merge({}, defaultConfig, confFileConfig, {
    serviceName: cliOptions.serviceName,
    input: cliOptions.input,
    outDir: cliOptions.outDir,
    common: cliOptions.common,
    force: cliOptions.force
  });
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mdW5jdGlvbnMvcHJlcGFyZS1jb25maWcudHMiXSwibmFtZXMiOlsiY2xpT3B0aW9ucyIsImFwcFJvb3RQYXRoIiwidW5kZWZpbmVkIiwiY29uZkZpbGVQYXRoIiwiY29uZmlnIiwiZXhpc3RzQ29uZkZpbGUiLCJjb25mRmlsZUNvbmZpZyIsImRlZmF1bHRDb25maWciLCJhbGwiLCJzZXJ2aWNlTmFtZSIsImJhc2VQYXRoIiwiaW5wdXQiLCJvdXREaXIiLCJjb21tb24iLCJmb3JjZSIsIm9wdGlvbnMiLCJjb3JzIiwib3B0aW9uc01ldGhvZCIsImF1dGhvcml6ZXIiLCJvcGVyYXRpb25JZCIsIl8iLCJtZXJnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUdBOzs7O2VBTWUsT0FDYkEsVUFEYSxFQUViQyxXQUErQixHQUFHQyxTQUZyQixLQUdlO0FBQzVCLFFBQU1DLFlBQVksR0FDaEIsT0FBT0gsVUFBVSxDQUFDSSxNQUFsQixLQUE2QixXQUE3QixHQUNJLCtCQUFtQkosVUFBVSxDQUFDSSxNQUE5QixFQUFzQ0gsV0FBdEMsQ0FESixHQUVJLCtCQUFtQixtQkFBbkIsRUFBd0NBLFdBQXhDLENBSE47QUFLQSxRQUFNSSxjQUFjLEdBQUcsTUFBTSx1QkFBV0YsWUFBWCxDQUE3QjtBQUVBLFFBQU1HLGNBQThCLEdBQUdELGNBQWMsR0FDakQsTUFBTSxtQ0FBdUJGLFlBQXZCLENBRDJDLEdBRWpELEVBRko7QUFJQSxRQUFNSSxhQUE2QixHQUFHO0FBQ3BDQyxJQUFBQSxHQUFHLEVBQUUsSUFEK0I7QUFFcENDLElBQUFBLFdBQVcsRUFBRSxTQUZ1QjtBQUdwQ0MsSUFBQUEsUUFBUSxFQUFFLEtBSDBCO0FBSXBDQyxJQUFBQSxLQUFLLEVBQUUsSUFKNkI7QUFLcENDLElBQUFBLE1BQU0sRUFBRSxJQUw0QjtBQU1wQ0MsSUFBQUEsTUFBTSxFQUFFLElBTjRCO0FBT3BDQyxJQUFBQSxLQUFLLEVBQUUsS0FQNkI7QUFRcENDLElBQUFBLE9BQU8sRUFBRTtBQUNQQyxNQUFBQSxJQUFJLEVBQUUsS0FEQztBQUVQQyxNQUFBQSxhQUFhLEVBQUUsS0FGUjtBQUdQQyxNQUFBQSxVQUFVLEVBQUUsSUFITDtBQUlQQyxNQUFBQSxXQUFXLEVBQUU7QUFKTjtBQVIyQixHQUF0QztBQWdCQSxTQUFPQyxnQkFBRUMsS0FBRixDQUFRLEVBQVIsRUFBWWQsYUFBWixFQUEyQkQsY0FBM0IsRUFBMkM7QUFDaERHLElBQUFBLFdBQVcsRUFBRVQsVUFBVSxDQUFDUyxXQUR3QjtBQUVoREUsSUFBQUEsS0FBSyxFQUFFWCxVQUFVLENBQUNXLEtBRjhCO0FBR2hEQyxJQUFBQSxNQUFNLEVBQUVaLFVBQVUsQ0FBQ1ksTUFINkI7QUFJaERDLElBQUFBLE1BQU0sRUFBRWIsVUFBVSxDQUFDYSxNQUo2QjtBQUtoREMsSUFBQUEsS0FBSyxFQUFFZCxVQUFVLENBQUNjO0FBTDhCLEdBQTNDLENBQVA7QUFPRCxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgQ0xJT3B0aW9ucywgQ29uZkZpbGVDb25maWcsIEludGVybmFsQ29uZmlnIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQge1xuICByZXNvbHZlQXBwUm9vdFBhdGgsXG4gIGV4aXN0c0l0ZW0sXG4gIGxvYWRGaWxlQXNKU09OSWZFeGlzdHMsXG59IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKFxuICBjbGlPcHRpb25zOiBDTElPcHRpb25zLFxuICBhcHBSb290UGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG4pOiBQcm9taXNlPEludGVybmFsQ29uZmlnPiA9PiB7XG4gIGNvbnN0IGNvbmZGaWxlUGF0aCA9XG4gICAgdHlwZW9mIGNsaU9wdGlvbnMuY29uZmlnICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyByZXNvbHZlQXBwUm9vdFBhdGgoY2xpT3B0aW9ucy5jb25maWcsIGFwcFJvb3RQYXRoKVxuICAgICAgOiByZXNvbHZlQXBwUm9vdFBhdGgoJy4vc2lzLmNvbmZpZy5qc29uJywgYXBwUm9vdFBhdGgpO1xuXG4gIGNvbnN0IGV4aXN0c0NvbmZGaWxlID0gYXdhaXQgZXhpc3RzSXRlbShjb25mRmlsZVBhdGgpO1xuXG4gIGNvbnN0IGNvbmZGaWxlQ29uZmlnOiBDb25mRmlsZUNvbmZpZyA9IGV4aXN0c0NvbmZGaWxlXG4gICAgPyBhd2FpdCBsb2FkRmlsZUFzSlNPTklmRXhpc3RzKGNvbmZGaWxlUGF0aClcbiAgICA6IHt9O1xuXG4gIGNvbnN0IGRlZmF1bHRDb25maWc6IEludGVybmFsQ29uZmlnID0ge1xuICAgIGFsbDogdHJ1ZSxcbiAgICBzZXJ2aWNlTmFtZTogJ3NlcnZpY2UnLFxuICAgIGJhc2VQYXRoOiBmYWxzZSxcbiAgICBpbnB1dDogbnVsbCxcbiAgICBvdXREaXI6IG51bGwsXG4gICAgY29tbW9uOiBudWxsLFxuICAgIGZvcmNlOiBmYWxzZSxcbiAgICBvcHRpb25zOiB7XG4gICAgICBjb3JzOiBmYWxzZSxcbiAgICAgIG9wdGlvbnNNZXRob2Q6IGZhbHNlLFxuICAgICAgYXV0aG9yaXplcjogbnVsbCxcbiAgICAgIG9wZXJhdGlvbklkOiBmYWxzZSxcbiAgICB9LFxuICB9O1xuXG4gIHJldHVybiBfLm1lcmdlKHt9LCBkZWZhdWx0Q29uZmlnLCBjb25mRmlsZUNvbmZpZywge1xuICAgIHNlcnZpY2VOYW1lOiBjbGlPcHRpb25zLnNlcnZpY2VOYW1lLFxuICAgIGlucHV0OiBjbGlPcHRpb25zLmlucHV0LFxuICAgIG91dERpcjogY2xpT3B0aW9ucy5vdXREaXIsXG4gICAgY29tbW9uOiBjbGlPcHRpb25zLmNvbW1vbixcbiAgICBmb3JjZTogY2xpT3B0aW9ucy5mb3JjZSxcbiAgfSk7XG59O1xuIl19