"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _path = _interopRequireDefault(require("path"));

var _gracefulFs = _interopRequireDefault(require("graceful-fs"));

var _util = require("util");

var _jsYaml = _interopRequireDefault(require("js-yaml"));

var _utils = require("../utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _default = async (services, config, appRootPath = undefined) => {
  await Promise.all(services.map(async service => {
    const filePath = config.outDir ? (0, _utils.resolveAppRootPath)(_path.default.resolve(config.outDir, `./${service.service}/serverless.yml`), appRootPath) : (0, _utils.resolveAppRootPath)(`./${service.service}/serverless.yml`);

    const dataString = _jsYaml.default.safeDump(service);

    await (0, _util.promisify)(_gracefulFs.default.writeFile)(filePath, dataString, 'utf8'); // eslint-disable-next-line no-console

    console.log(`Write serverless.yml of ${service.service} complete.`);
  }));
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mdW5jdGlvbnMvd3JpdGUtc2VydmljZXMudHMiXSwibmFtZXMiOlsic2VydmljZXMiLCJjb25maWciLCJhcHBSb290UGF0aCIsInVuZGVmaW5lZCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJzZXJ2aWNlIiwiZmlsZVBhdGgiLCJvdXREaXIiLCJwYXRoIiwicmVzb2x2ZSIsImRhdGFTdHJpbmciLCJqc3lhbWwiLCJzYWZlRHVtcCIsImZzIiwid3JpdGVGaWxlIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBOztBQUdBOzs7O2VBRWUsT0FDYkEsUUFEYSxFQUViQyxNQUZhLEVBR2JDLFdBQStCLEdBQUdDLFNBSHJCLEtBSUs7QUFDbEIsUUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQ0pMLFFBQVEsQ0FBQ00sR0FBVCxDQUFhLE1BQU1DLE9BQU4sSUFBaUI7QUFDNUIsVUFBTUMsUUFBUSxHQUFHUCxNQUFNLENBQUNRLE1BQVAsR0FDYiwrQkFDRUMsY0FBS0MsT0FBTCxDQUFhVixNQUFNLENBQUNRLE1BQXBCLEVBQTZCLEtBQUlGLE9BQU8sQ0FBQ0EsT0FBUSxpQkFBakQsQ0FERixFQUVFTCxXQUZGLENBRGEsR0FLYiwrQkFBb0IsS0FBSUssT0FBTyxDQUFDQSxPQUFRLGlCQUF4QyxDQUxKOztBQU9BLFVBQU1LLFVBQVUsR0FBR0MsZ0JBQU9DLFFBQVAsQ0FBZ0JQLE9BQWhCLENBQW5COztBQUNBLFVBQU0scUJBQVVRLG9CQUFHQyxTQUFiLEVBQXdCUixRQUF4QixFQUFrQ0ksVUFBbEMsRUFBOEMsTUFBOUMsQ0FBTixDQVQ0QixDQVU1Qjs7QUFDQUssSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsMkJBQTBCWCxPQUFPLENBQUNBLE9BQVEsWUFBdkQ7QUFDRCxHQVpELENBREksQ0FBTjtBQWVELEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBmcyBmcm9tICdncmFjZWZ1bC1mcyc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcblxuaW1wb3J0IGpzeWFtbCBmcm9tICdqcy15YW1sJztcblxuaW1wb3J0IHsgSW50ZXJuYWxDb25maWcsIFNsc1NlcnZpY2UgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7IHJlc29sdmVBcHBSb290UGF0aCB9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKFxuICBzZXJ2aWNlczogU2xzU2VydmljZVtdLFxuICBjb25maWc6IEludGVybmFsQ29uZmlnLFxuICBhcHBSb290UGF0aDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXG4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgc2VydmljZXMubWFwKGFzeW5jIHNlcnZpY2UgPT4ge1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBjb25maWcub3V0RGlyXG4gICAgICAgID8gcmVzb2x2ZUFwcFJvb3RQYXRoKFxuICAgICAgICAgICAgcGF0aC5yZXNvbHZlKGNvbmZpZy5vdXREaXIsIGAuLyR7c2VydmljZS5zZXJ2aWNlfS9zZXJ2ZXJsZXNzLnltbGApLFxuICAgICAgICAgICAgYXBwUm9vdFBhdGhcbiAgICAgICAgICApXG4gICAgICAgIDogcmVzb2x2ZUFwcFJvb3RQYXRoKGAuLyR7c2VydmljZS5zZXJ2aWNlfS9zZXJ2ZXJsZXNzLnltbGApO1xuXG4gICAgICBjb25zdCBkYXRhU3RyaW5nID0ganN5YW1sLnNhZmVEdW1wKHNlcnZpY2UpO1xuICAgICAgYXdhaXQgcHJvbWlzaWZ5KGZzLndyaXRlRmlsZSkoZmlsZVBhdGgsIGRhdGFTdHJpbmcsICd1dGY4Jyk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS5sb2coYFdyaXRlIHNlcnZlcmxlc3MueW1sIG9mICR7c2VydmljZS5zZXJ2aWNlfSBjb21wbGV0ZS5gKTtcbiAgICB9KVxuICApO1xufTtcbiJdfQ==