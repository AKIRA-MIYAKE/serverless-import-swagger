"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _apicurioDataModels = require("apicurio-data-models");

var _utils = require("../utils");

var _default = async (config, appRootPath = undefined) => {
  let filePaths;

  if (config.input === null || config.input.length === 0) {
    const filePath = await (0, _utils.getPathIfExistsWithRegExp)(/^openapi.ya?ml$/, appRootPath);

    if (typeof filePath !== 'undefined') {
      filePaths = [filePath];
    } else {
      throw new Error('API definition file not found.');
    }
  } else {
    filePaths = config.input.map(filePath => (0, _utils.resolveAppRootPath)(filePath, appRootPath));
  }

  const dataArray = await Promise.all(filePaths.map(filePath => (0, _utils.loadFileAsJSONIfExists)(filePath)));
  return dataArray.map(data => _apicurioDataModels.Library.readDocument(data));
};

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9mdW5jdGlvbnMvbG9hZC1hcGktZG9jdW1lbnRzLnRzIl0sIm5hbWVzIjpbImNvbmZpZyIsImFwcFJvb3RQYXRoIiwidW5kZWZpbmVkIiwiZmlsZVBhdGhzIiwiaW5wdXQiLCJsZW5ndGgiLCJmaWxlUGF0aCIsIkVycm9yIiwibWFwIiwiZGF0YUFycmF5IiwiUHJvbWlzZSIsImFsbCIsImRhdGEiLCJMaWJyYXJ5IiwicmVhZERvY3VtZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBR0E7O2VBTWUsT0FDYkEsTUFEYSxFQUViQyxXQUErQixHQUFHQyxTQUZyQixLQUdXO0FBQ3hCLE1BQUlDLFNBQUo7O0FBQ0EsTUFBSUgsTUFBTSxDQUFDSSxLQUFQLEtBQWlCLElBQWpCLElBQXlCSixNQUFNLENBQUNJLEtBQVAsQ0FBYUMsTUFBYixLQUF3QixDQUFyRCxFQUF3RDtBQUN0RCxVQUFNQyxRQUFRLEdBQUcsTUFBTSxzQ0FDckIsaUJBRHFCLEVBRXJCTCxXQUZxQixDQUF2Qjs7QUFLQSxRQUFJLE9BQU9LLFFBQVAsS0FBb0IsV0FBeEIsRUFBcUM7QUFDbkNILE1BQUFBLFNBQVMsR0FBRyxDQUFDRyxRQUFELENBQVo7QUFDRCxLQUZELE1BRU87QUFDTCxZQUFNLElBQUlDLEtBQUosQ0FBVSxnQ0FBVixDQUFOO0FBQ0Q7QUFDRixHQVhELE1BV087QUFDTEosSUFBQUEsU0FBUyxHQUFHSCxNQUFNLENBQUNJLEtBQVAsQ0FBYUksR0FBYixDQUFpQkYsUUFBUSxJQUNuQywrQkFBbUJBLFFBQW5CLEVBQTZCTCxXQUE3QixDQURVLENBQVo7QUFHRDs7QUFFRCxRQUFNUSxTQUFTLEdBQUcsTUFBTUMsT0FBTyxDQUFDQyxHQUFSLENBQ3RCUixTQUFTLENBQUNLLEdBQVYsQ0FBY0YsUUFBUSxJQUFJLG1DQUF1QkEsUUFBdkIsQ0FBMUIsQ0FEc0IsQ0FBeEI7QUFJQSxTQUFPRyxTQUFTLENBQUNELEdBQVYsQ0FBY0ksSUFBSSxJQUFJQyw0QkFBUUMsWUFBUixDQUFxQkYsSUFBckIsQ0FBdEIsQ0FBUDtBQUNELEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMaWJyYXJ5LCBEb2N1bWVudCB9IGZyb20gJ2FwaWN1cmlvLWRhdGEtbW9kZWxzJztcblxuaW1wb3J0IHsgSW50ZXJuYWxDb25maWcgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7XG4gIHJlc29sdmVBcHBSb290UGF0aCxcbiAgZ2V0UGF0aElmRXhpc3RzV2l0aFJlZ0V4cCxcbiAgbG9hZEZpbGVBc0pTT05JZkV4aXN0cyxcbn0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoXG4gIGNvbmZpZzogSW50ZXJuYWxDb25maWcsXG4gIGFwcFJvb3RQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbik6IFByb21pc2U8RG9jdW1lbnRbXT4gPT4ge1xuICBsZXQgZmlsZVBhdGhzOiBzdHJpbmdbXTtcbiAgaWYgKGNvbmZpZy5pbnB1dCA9PT0gbnVsbCB8fCBjb25maWcuaW5wdXQubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBhd2FpdCBnZXRQYXRoSWZFeGlzdHNXaXRoUmVnRXhwKFxuICAgICAgL15vcGVuYXBpLnlhP21sJC8sXG4gICAgICBhcHBSb290UGF0aFxuICAgICk7XG5cbiAgICBpZiAodHlwZW9mIGZpbGVQYXRoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZmlsZVBhdGhzID0gW2ZpbGVQYXRoXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEkgZGVmaW5pdGlvbiBmaWxlIG5vdCBmb3VuZC4nKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZmlsZVBhdGhzID0gY29uZmlnLmlucHV0Lm1hcChmaWxlUGF0aCA9PlxuICAgICAgcmVzb2x2ZUFwcFJvb3RQYXRoKGZpbGVQYXRoLCBhcHBSb290UGF0aClcbiAgICApO1xuICB9XG5cbiAgY29uc3QgZGF0YUFycmF5ID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgZmlsZVBhdGhzLm1hcChmaWxlUGF0aCA9PiBsb2FkRmlsZUFzSlNPTklmRXhpc3RzKGZpbGVQYXRoKSlcbiAgKTtcblxuICByZXR1cm4gZGF0YUFycmF5Lm1hcChkYXRhID0+IExpYnJhcnkucmVhZERvY3VtZW50KGRhdGEpKTtcbn07XG4iXX0=